@page
@model Licenta.Pages.Administrator.Settings.IndexModel
@{
    ViewData["Title"] = "System Settings";
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true" />
}

<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="d-flex align-items-center mb-4">
            <div class="bg-warning-subtle text-warning p-3 rounded-4 me-3">
                <i class="bi bi-gear-fill fs-3"></i>
            </div>
            <div>
                <h2 class="fw-bold mb-0">System Configuration</h2>
                <p class="text-muted mb-0">Global settings for the clinic platform.</p>
            </div>
        </div>

        @if (TempData["Status"] is string msg)
        {
            <div class="alert alert-success border-0 shadow-sm rounded-3 mb-4">@msg</div>
        }

        @if (TempData["Error"] is string err)
        {
            <div class="alert alert-danger border-0 shadow-sm rounded-3 mb-4">@err</div>
        }

        <form method="post" enctype="multipart/form-data">
            @Html.AntiForgeryToken()

            <div class="card mb-4">
                <div class="card-header bg-transparent border-0 pb-0 pt-4">
                    <h5 class="fw-bold text-primary">
                        <i class="bi bi-stars me-2"></i>Branding & Uploads
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-8">
                            <label class="form-label text-muted small fw-bold">CLINIC NAME</label>
                            <input asp-for="Input.ClinicName" class="form-control form-control-lg" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label text-muted small fw-bold">MAX UPLOAD (MB)</label>
                            <div class="input-group">
                                <input asp-for="Input.MaxUploadMb" class="form-control form-control-lg" type="number" min="1" max="200" />
                                <span class="input-group-text">MB</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <label class="form-label text-muted small fw-bold">LOGO</label>
                            <input type="file" asp-for="LogoFile" class="form-control" accept=".png,.jpg,.jpeg,.webp,.svg" />

                            @if (!string.IsNullOrWhiteSpace(Model.Input.LogoPath))
                            {
                                <div class="mt-3 p-3 bg-light rounded-3 d-inline-block border">
                                    <img src="@Model.Input.LogoPath" style="height:50px;" />
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-transparent border-0 pb-0 pt-4">
                    <h5 class="fw-bold text-danger">
                        <i class="bi bi-shield-lock me-2"></i>Security Policy
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row g-3 align-items-center">
                        <div class="col-md-4">
                            <label class="form-label text-muted small fw-bold">MIN PASSWORD LENGTH</label>
                            <input asp-for="Input.PasswordMinLength" type="number" class="form-control" min="4" max="128" />
                        </div>
                        <div class="col-md-8">
                            <div class="d-flex gap-4 mt-4 flex-wrap">
                                <div class="form-check">
                                    <input asp-for="Input.RequireDigit" class="form-check-input" />
                                    <label class="form-check-label">Require digit</label>
                                </div>
                                <div class="form-check">
                                    <input asp-for="Input.RequireUppercase" class="form-check-input" />
                                    <label class="form-check-label">Require uppercase</label>
                                </div>
                                <div class="form-check">
                                    <input asp-for="Input.RequireSpecialChar" class="form-check-input" />
                                    <label class="form-check-label">Require special character</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end mb-5">
                <button type="submit" class="btn btn-primary btn-lg px-5 rounded-pill">
                    <i class="bi bi-save me-2"></i>Save Configuration
                </button>
            </div>
        </form>
    </div>
</div>
